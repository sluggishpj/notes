import{_ as o,c as t,a2 as a,o as r}from"./chunks/framework.Dr622ulX.js";const u=JSON.parse('{"title":"存储","description":"","frontmatter":{"title":"存储"},"headers":[],"relativePath":"frontend/browser/storage.md","filePath":"docs/frontend/browser/storage.md"}'),l={name:"frontend/browser/storage.md"};function i(d,e,s,c,n,h){return r(),t("div",null,e[0]||(e[0]=[a('<h1 id="存储" tabindex="-1">存储 <a class="header-anchor" href="#存储" aria-label="Permalink to &quot;存储&quot;">​</a></h1><h2 id="cookie" tabindex="-1">cookie <a class="header-anchor" href="#cookie" aria-label="Permalink to &quot;cookie&quot;">​</a></h2><ul><li>limit: 4K</li><li>每次都会携带在 header 中</li></ul><p>安全性</p><table tabindex="0"><thead><tr><th>属性</th><th>作用</th></tr></thead><tbody><tr><td>value</td><td>如果用于保存用户登录态，应该将该值加密，不能使用明文的用户标识</td></tr><tr><td>http-only</td><td>不能通过 JS 访问 Cookie，减少 XSS 攻击</td></tr><tr><td>secure</td><td>只能在协议为 HTTPS 的请求中携带</td></tr><tr><td>same-site</td><td>规定浏览器不能在跨域请求中携带 Cookie，减少 CSRF 攻击</td></tr></tbody></table><h2 id="localstorage" tabindex="-1">localStorage <a class="header-anchor" href="#localstorage" aria-label="Permalink to &quot;localStorage&quot;">​</a></h2><ul><li>limit: 5M</li><li>除非被清理，否则一直存在</li></ul><h2 id="sessionstorage" tabindex="-1">sessionStorage <a class="header-anchor" href="#sessionstorage" aria-label="Permalink to &quot;sessionStorage&quot;">​</a></h2><ul><li>limit: 5M</li><li>页面关闭就清理</li></ul><h2 id="indexdb" tabindex="-1">indexDB <a class="header-anchor" href="#indexdb" aria-label="Permalink to &quot;indexDB&quot;">​</a></h2><ul><li>limit: 不同浏览器不一样</li></ul><h2 id="储存限制" tabindex="-1">储存限制 <a class="header-anchor" href="#储存限制" aria-label="Permalink to &quot;储存限制&quot;">​</a></h2><p>浏览器的最大存储空间是动态的——它取决于您的硬盘大小。 <strong>全局限制</strong>为可用磁盘空间的 50％。 如果超过此范围，则会发起称为源回收的过程，删除整个源的数据，直到存储量再次低于限制。删除源数据没有只删一部分的说法——因为这样可能会导致不一致的问题。</p><p>还有另一个限制称为<strong>组限制</strong>——这被定义为全局限制的 20％，但它至少有 10 MB，最大为 2GB。 每个源都是一组（源组）的一部分。</p><ul><li><code>mozilla.org</code>——组 1，源 1</li><li><code>www.mozilla.org</code>——组 1，源 2</li><li><code>joe.blogs.mozilla.org</code>——组 1，源 3</li><li><code>firefox.com</code> ——组 2，源 4</li></ul><p>在这个组中，<code>mozilla.org</code>、<code>www.mozilla.org</code> 和 <code>joe.blogs.mozilla.org</code> 可以聚合使用最多 20％的全局限制。 <code>firefox.com</code> 单独最多使用 20％。</p><blockquote><p>chrome 的组限制是 min(剩余内存/10, 2G)。<a href="https://chromium.googlesource.com/chromium/src/+/refs/heads/master/storage/browser/quota/quota_settings.cc#68" target="_blank" rel="noreferrer">REF</a></p></blockquote>',17)]))}const g=o(l,[["render",i]]);export{u as __pageData,g as default};
